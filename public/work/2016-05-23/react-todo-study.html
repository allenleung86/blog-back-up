<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="baidu-site-verification" content="5tcBr0YNFF" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>React入门最好的实例－TodoList | luckykun-不一样的世界</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属react了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo
首先react值得拍手称赞的是它所有的开发都基于组件（com">
<meta property="og:type" content="article">
<meta property="og:title" content="React入门最好的实例－TodoList">
<meta property="og:url" content="http://yoursite.com/work/2016-05-23/react-todo-study.html">
<meta property="og:site_name" content="luckykun-不一样的世界">
<meta property="og:description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属react了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo
首先react值得拍手称赞的是它所有的开发都基于组件（com">
<meta property="og:updated_time" content="2016-07-23T09:50:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React入门最好的实例－TodoList">
<meta name="twitter:description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属react了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo
首先react值得拍手称赞的是它所有的开发都基于组件（com">
  
  
      <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />
  
  <link rel="stylesheet" href="/css/style.css">

  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?527e9393be17772155eb920f1ce3648e";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>

<body>
    <div id="overviews">
        <div id="slider-wrap">
            <div class="sliders">
                <div class="slide" data-num="1">
                    <div class="text-wrap">
                        <p>神灯神灯，我有一个愿望，</p>
                        <p>我不要金钱、权利；</p>
                        <p>也不要长生、不老。</p>
                        <p>我只想要遇到一个女孩，</p>
                        <p>能陪着她哭，陪着她笑，陪她一起细水长流。</p>
                    </div>
                </div>
                <div class="slide" data-num="2">
                    <div class="text-wrap">
                        <p>越了解，越喜欢；</p>
                        <p>越喜欢，越害怕。</p>
                        <p>你转身向北，</p>
                        <p>侧脸还是那么美，</p>
                        <p>我用眼光去追，竟听见你的泪。</p>
                    </div>
                </div>
                <div class="slide" data-num="3">
                    <div class="text-wrap">
                        <p>置身在灯红酒绿的城市，</p>
                        <p>站在车水马龙的街道，</p>
                        <p>灯光的美，</p>
                        <p>夜晚的静，</p>
                        <p>更加衬托出了人们的寂寞。</p>
                    </div>
                </div>
                <div class="slide" data-num="4">
                    <div class="text-wrap">
                        <p>从此故乡再无春秋，</p>
                        <p>从此青春再无当时。</p>
                        <p>你爱诗歌，我便学着写作；</p>
                        <p>你爱远方，我便离开故乡。</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="top-wrap">
            <div class="main-top">
                <div class="left-logo">
                    <img src="" alt="logo" />
                    <span>不一样的世界</span>
                </div>
                <ul class="right-nav">
                    <li><a href="//luckykun.com/categories/life/">生活随笔</a></li>
                    <li><a href="//luckykun.com/demo/">实例DEMO</a></li>
                    <li><a href="//luckykun.com/archives/">所有文章</a></li>
                </ul>
            </div>
        </div>
        <p class="welcome-info">欢迎您，您是本站第 <span style="color:#ef7522">0</span> 位访客</p>
        <div class="left-shadow"></div>
        <div class="right-shadow"></div>
        <a href="javascript:;" id="btn-begin-blog">Let's Begin</a>
    </div>
  <div id="container">
    <div class="left-col">
    <div class="overlay">

	<a href="/" class="profilepic">
		
		<img lazy-src="/img/user.png" class="js-avatar">
		
	</a>

	<div class="search-wrap">
		<span title="点击显示搜索框"><i class="search-icon"></i></span>
		<input class="search-txt" type="text" placeholder="输入文章标题按回车键搜索" />
	</div>
	<div class="search-result">
		<ul>

		</ul>
	</div>

</div>
<div class="intrude-less">
	<header id="header" class="inner">

		<hgroup>
		  <h1 class="header-author"><a href="/">luckykun</a></h1>
		</hgroup>

		
		<p class="header-subtitle">我就是我，颜色不一样的烟火</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>

				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<!-- <li>Menu</li> -->
						<!-- <li>Tags</li> -->
						<li>主菜单</li>
						<li>云标签</li>
						
						
						<!-- <li>Über</li> -->
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/demo/">demo</a></li>
				        
							<li><a href="/categories/life/">生活</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/luckykun" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/u/2732624311" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>

				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/3D效果/" style="font-size: 10px;">3D效果</a> <a href="/tags/CSS3/" style="font-size: 15px;">CSS3</a> <a href="/tags/ajax/" style="font-size: 10px;">ajax</a> <a href="/tags/angular/" style="font-size: 10px;">angular</a> <a href="/tags/canvas/" style="font-size: 12.5px;">canvas</a> <a href="/tags/demo/" style="font-size: 17.5px;">demo</a> <a href="/tags/es6/" style="font-size: 12.5px;">es6</a> <a href="/tags/grunt/" style="font-size: 10px;">grunt</a> <a href="/tags/hexo系列/" style="font-size: 15px;">hexo系列</a> <a href="/tags/highcharts/" style="font-size: 10px;">highcharts</a> <a href="/tags/html5/" style="font-size: 12.5px;">html5</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/react/" style="font-size: 12.5px;">react</a> <a href="/tags/实例/" style="font-size: 10px;">实例</a> <a href="/tags/微信分享/" style="font-size: 10px;">微信分享</a> <a href="/tags/插件/" style="font-size: 12.5px;">插件</a> <a href="/tags/教程/" style="font-size: 20px;">教程</a> <a href="/tags/文件上传/" style="font-size: 10px;">文件上传</a> <a href="/tags/构建/" style="font-size: 10px;">构建</a> <a href="/tags/编辑器/" style="font-size: 10px;">编辑器</a>
					</div>
				</section>
				

				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">
						<p>家乡：广元市，也是武则天的家乡~</p>
						<p>学校：成都信息工程大学</p>
						<p>职业：一枚程序猿~</p>
						<p>爱好：篮球、羽毛球</p>
					</div>
				</section>
				
			</div>
		</div>
	</header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">luckykun</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="/img/user.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">luckykun</h1>
			</hgroup>
			
			<p class="header-subtitle">我就是我，颜色不一样的烟火</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/demo/">demo</a></li>
		        
					<li><a href="/categories/life/">生活</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/luckykun" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2732624311" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-react-todo-study" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      
<time datetime="2016-05-23T14:11:51.000Z" itemprop="datePublished">2016-05-23</time>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      React入门最好的实例－TodoList
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/教程/">教程</a></li></ul>
	</div>


        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/work/">工作</a>
	</div>


        <div class="busuanzi-read-num">
            阅读次数：<span id="busuanzi_value_page_pv"><img src="http://7xtawy.com2.z0.glb.clouddn.com/loading1.png"/></span>次
        </div>
        <div class="clearfix"></div>
      </div>
      
    
    <!-- Table of Contents -->
    
    <p class="show-toc-btn">
        <span class="btn-bg"></span>
        <span class="btn-text">文章导航</span>
    </p>
    <div id="toc" class="toc-article">
    <span class="toc-close" title="隐藏导航">×</span>
    <!-- <strong class="toc-title">文章目录</strong> -->
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#项目初始化"><span class="toc-number">1.</span> <span class="toc-text">项目初始化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#webpack配置"><span class="toc-number">2.</span> <span class="toc-text">webpack配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#项目目录"><span class="toc-number">3.</span> <span class="toc-text">项目目录</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#index-html和entry-js"><span class="toc-number">4.</span> <span class="toc-text">index.html和entry.js</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#分析组件"><span class="toc-number">5.</span> <span class="toc-text">分析组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#App"><span class="toc-number">5.1.</span> <span class="toc-text">App</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#App状态"><span class="toc-number">5.1.1.</span> <span class="toc-text">App状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#App的方法"><span class="toc-number">5.1.2.</span> <span class="toc-text">App的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#渲染App"><span class="toc-number">5.1.3.</span> <span class="toc-text">渲染App</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TodoHeader组件"><span class="toc-number">5.2.</span> <span class="toc-text">TodoHeader组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TodoMain组件"><span class="toc-number">5.3.</span> <span class="toc-text">TodoMain组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TodoItem组件"><span class="toc-number">5.4.</span> <span class="toc-text">TodoItem组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TodoFooter组件"><span class="toc-number">5.5.</span> <span class="toc-text">TodoFooter组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总结"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考资料"><span class="toc-number">7.</span> <span class="toc-text">参考资料</span></a></li></ol>
    </div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <hr>
<blockquote>
<p>React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。</p>
</blockquote>
<p>最近前端界闹的沸沸扬扬的技术当属<code>react</code>了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：<code>react-todos</code>， 为了提起兴趣，你可以先<a href="http://luckykun.com/work/2016-05-08/react-todo-demo.html" target="_blank" rel="external">点这里去看react-todo</a></p>
<p>首先react值得拍手称赞的是它所有的开发都基于<code>组件（component）</code>，然后组件和组件之间通过props传递方法，每个组件都有一个<code>状态（state）</code>，当某个方法改变了这个状态值时，整个组件就会<code>重绘</code>，从而达到刷新。另外，说到重绘就要提到<code>虚拟dom</code>了，就是用js模拟dom结构，等整个组件的dom更新完毕，才渲染到页面，简单来说只更新了相比之前改变了的部分，而不是全部刷新，所以效率很高。<br><a id="more"></a></p>
<h1 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h1><p>大家先新建一个项目文件夹，在里面建一个项目信息的文件<code>package.json</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"name"</span>: <span class="string">"react-todos"</span>,</div><div class="line">    <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">    <span class="string">"description"</span>: <span class="string">""</span>,</div><div class="line">    <span class="string">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">    <span class="string">"scripts"</span>: &#123;</div><div class="line">        <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"author"</span>: <span class="string">""</span>,</div><div class="line">    <span class="string">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">    <span class="string">"dependencies"</span>: &#123;</div><div class="line">        <span class="string">"react"</span>: <span class="string">"^0.13.3"</span>,</div><div class="line">        <span class="string">"sass"</span>: <span class="string">"^0.5.0"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="string">"devDependencies"</span>: &#123;</div><div class="line">        <span class="string">"babel-core"</span>: <span class="string">"^5.5.8"</span>,</div><div class="line">        <span class="string">"babel-loader"</span>: <span class="string">"^5.1.4"</span>,</div><div class="line">        <span class="string">"css-loader"</span>: <span class="string">"^0.14.5"</span>,</div><div class="line">        <span class="string">"file-loader"</span>: <span class="string">"^0.8.4"</span>,</div><div class="line">        <span class="string">"jsx-loader"</span>: <span class="string">"^0.13.2"</span>,</div><div class="line">        <span class="string">"node-libs-browser"</span>: <span class="string">"^0.5.2"</span>,</div><div class="line">        <span class="string">"node-sass"</span>: <span class="string">"^3.2.0"</span>,</div><div class="line">        <span class="string">"sass-loader"</span>: <span class="string">"^1.0.2"</span>,</div><div class="line">        <span class="string">"style-loader"</span>: <span class="string">"^0.12.3"</span>,</div><div class="line">        <span class="string">"url-loader"</span>: <span class="string">"^0.5.6"</span>,</div><div class="line">        <span class="string">"webpack"</span>: <span class="string">"^1.9.11"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>建好之后，运行命令：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">npm install</div></pre></td></tr></table></figure>
<p>安装项目依赖的所有模块。安装好之后，另外还有一点，项目数据是存储在本地浏览器的，所以我找到一个小模块用来操作localStorage，它的原理就是，通过将数据格式化成JSON字符串进行存储，使用的时候就解析JSON字符串。他的代码<a href="https://github.com/luckykun/react-demo/tree/master/node_modules/localDb" target="_blank" rel="external">点这里看localDb</a>可以看到，你可以复制一份，放在node_modules的文件夹内。</p>
<h1 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h1><p>项目使用的技术方案是：<code>webpack＋react＋es6</code>。关于es6的文章，我之前简单的介绍过，可以<a href="http://luckykun.com/work/2016-05-10/es6-feature.html" target="_blank" rel="external">点这里去看es6</a>，关于webpack的学习，我这里不详述了，看以后有时间再出篇文章吧。在项目文件夹下新建一个<code>webpack.config.js</code>：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    entry: [</div><div class="line">        <span class="string">"./src/entry.js"</span></div><div class="line">    ],</div><div class="line">    output: &#123;</div><div class="line">        path: <span class="string">'./out/'</span>,</div><div class="line">        filename: <span class="string">"bundle.js"</span></div><div class="line">    &#125;,</div><div class="line">    externals: &#123;</div><div class="line">        <span class="string">'react'</span>: <span class="string">'React'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="built_in">module</span>: &#123;</div><div class="line">        loaders: [</div><div class="line">            &#123; test: <span class="regexp">/\.js$/</span>, loader: <span class="string">"jsx!babel"</span>, include: <span class="regexp">/src/</span>&#125;,</div><div class="line">            &#123; test: <span class="regexp">/\.css$/</span>, loader: <span class="string">"style!css"</span>&#125;,</div><div class="line">            &#123; test: <span class="regexp">/\.scss$/</span>, loader: <span class="string">"style!css!sass"</span>&#125;,</div><div class="line">            &#123; test: <span class="regexp">/\.(png|jpg)$/</span>, loader: <span class="string">'url?limit=8192'</span>&#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>上面的文件可以看到：入口文件是在src文件夹里的entry.js，然后输出文件放在out文件夹的bundle.js里。externals属性是告诉webpack当遇到require(‘react’)的时候，不去处理并且默认为全局的React变量。这样子，我们就需要在index.html单独用src去加载js。最后看看配置的loaders：</p>
<ul>
<li>因为我们js文件会使用jsx和es6的语法，所以使用<code>jsx-loader</code>和<code>babel-loader</code>来编译js文件。</li>
<li>scss文件使用<code>sass-loader</code>编译成css文件。</li>
<li>写的时候可以省略-loader，多个loader使用<code>!</code>连接。</li>
</ul>
<h1 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h1><p>先来看一下项目的目录结构，最重要的就是src目录：</p>
<ul>
<li><code>index.html</code>是项目的入口页面。</li>
<li><code>components</code>文件夹存放项目拆分出来的各个组件文件。</li>
<li><code>vendor</code>文件夹存放项目依赖的框架，这里只有react。</li>
</ul>
<h1 id="index-html和entry-js"><a href="#index-html和entry-js" class="headerlink" title="index.html和entry.js"></a>index.html和entry.js</h1><p>先来看index.html：</p>
<figure class="highlight"><table><tr><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">    &lt;header&gt;</div><div class="line">        &lt;h1 class="todo-title"&gt;React-Todos&lt;/h1&gt;</div><div class="line">    &lt;/header&gt;</div><div class="line">    &lt;div class="container todo-container"&gt;</div><div class="line">        &lt;div id="app"&gt;&lt;/div&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">    &lt;script src="./src/vendor/react.min.js"&gt;&lt;/script&gt;</div><div class="line">    &lt;script src="./out/bundle.js"&gt;&lt;/script&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>entry.js :</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="built_in">require</span>(<span class="string">'./styles/main.scss'</span>);    <span class="comment">// 引入样式表</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./components/App'</span>);     <span class="comment">// 引入组件</span></div></pre></td></tr></table></figure>
<p>webpack会将入口文件进行合并和整理，最后输出一个bundle.js，所以所有的逻辑都在这个js文件中，因此在index.html中，只需要引入react框架和bundle.js就好了。</p>
<h1 id="分析组件"><a href="#分析组件" class="headerlink" title="分析组件"></a>分析组件</h1><p>这个todo的项目，我们可以分为三个部分：头部，中间部分，尾部。那我们就来逐一的分析一下这些组件：</p>
<h2 id="App"><a href="#App" class="headerlink" title="App"></a>App</h2><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> LocalDb <span class="keyword">from</span> <span class="string">'localDb'</span>;</div><div class="line"><span class="keyword">import</span> TodoHeader <span class="keyword">from</span> <span class="string">'./TodoHeader.js'</span>;</div><div class="line"><span class="keyword">import</span> TodoMain <span class="keyword">from</span> <span class="string">'./TodoMain.js'</span>;</div><div class="line"><span class="keyword">import</span> TodoFooter <span class="keyword">from</span> <span class="string">'./TodoFooter.js'</span></div><div class="line"><span class="comment">//es6写法</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123; <span class="comment">//定义组件，继承父类</span></div><div class="line">    <span class="keyword">constructor</span>() &#123; <span class="comment">//定义App类的构造函数</span></div><div class="line">        <span class="keyword">super</span>(); <span class="comment">//调用父类的构造函数</span></div><div class="line">        <span class="keyword">this</span>.db = <span class="keyword">new</span> LocalDb(<span class="string">'ReactDemo'</span>);</div><div class="line">        <span class="keyword">this</span>.state = &#123; <span class="comment">//定义组件状态</span></div><div class="line">            todos: <span class="keyword">this</span>.db.get(<span class="string">'todos'</span>) || [],</div><div class="line">            isAllChecked: <span class="literal">false</span></div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 判断是否所有任务的状态都完成，同步底部的全选框</span></div><div class="line">    allChecked() &#123;</div><div class="line">        <span class="keyword">let</span> isAllChecked = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.state.todos.every(todo =&gt; todo.isDone)) &#123;</div><div class="line">            isAllChecked = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;   <span class="comment">//改变状态，组件重绘</span></div><div class="line">            todos: <span class="keyword">this</span>.state.todos,</div><div class="line">            isAllChecked: isAllChecked</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 添加任务，是传递给Header组件的方法</span></div><div class="line">    addTodo(todoItem)&#123;</div><div class="line">        <span class="keyword">this</span>.state.todos.push(todoItem);  <span class="comment">//todo列表</span></div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">        <span class="keyword">this</span>.allChecked();</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 删除当前的任务，传递给TodoItem的方法</span></div><div class="line">    deleteTodo(index)&#123;</div><div class="line">        <span class="keyword">this</span>.state.todos.splice(index, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.setState(&#123;todos: <span class="keyword">this</span>.state.todos&#125;);  <span class="comment">//改变状态</span></div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 清除已完成的任务，传递给Footer组件的方法</span></div><div class="line">    clearDone()&#123;</div><div class="line">        <span class="keyword">let</span> todos = <span class="keyword">this</span>.state.todos.filter(todo =&gt; !todo.isDone);   <span class="comment">//过滤掉数组中todo.isDone为true的item。</span></div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            todos: todos,</div><div class="line">            isAllChecked: <span class="literal">false</span></div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 改变任务状态，传递给TodoItem和Footer组件的方法</span></div><div class="line">    changeTodoState(index, isDone, isChangeAll=<span class="literal">false</span>)&#123;   <span class="comment">//初始化isChangeAll为false</span></div><div class="line">        <span class="keyword">if</span>(isChangeAll)&#123;     <span class="comment">//全部操作</span></div><div class="line">            <span class="keyword">this</span>.setState(&#123;</div><div class="line">                todos: <span class="keyword">this</span>.state.todos.map((todo) =&gt; &#123;</div><div class="line">                    todo.isDone = isDone;</div><div class="line">                    <span class="keyword">return</span> todo;</div><div class="line">                &#125;),</div><div class="line">                isAllChecked: isDone</div><div class="line">            &#125;);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;   <span class="comment">//操作其中一个todo</span></div><div class="line">            <span class="keyword">this</span>.state.todos[index].isDone = isDone;</div><div class="line">            <span class="keyword">this</span>.allChecked();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//组件渲染方法</span></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> info = &#123;</div><div class="line">            isAllChecked: <span class="keyword">this</span>.state.isAllChecked,</div><div class="line">            todoCount: <span class="keyword">this</span>.state.todos.length || <span class="number">0</span>,</div><div class="line">            todoDoneCount: (<span class="keyword">this</span>.state.todos &amp;&amp; <span class="keyword">this</span>.state.todos.filter((todo) =&gt; todo.isDone)).length || <span class="number">0</span></div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div className="todo-wrap"&gt;</div><div class="line">                &lt;TodoHeader addTodo=&#123;this.addTodo.bind(this)&#125; /&gt;</div><div class="line">                &lt;TodoMain todos=&#123;this.state.todos&#125; deleteTodo=&#123;this.deleteTodo.bind(this)&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; /&gt;</div><div class="line">                &lt;TodoFooter &#123;...info&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; clearDone=&#123;this.clearDone.bind(this)&#125; /&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">React.render(&lt;App/&gt;, document.getElementById('app'));</div></pre></td></tr></table></figure>
<p>我们知道React的主流思想就是，所有的state状态和方法都是由父组件控制，然后通过props传递给子组件，形成一个单方向的数据链路，保持各组件的状态一致。所以我们在这个父组件App上，看的东西稍微有点多。一点点来看：</p>
<ul>
<li>它采用es6的语法来创建了一个<code>继承React.Components的App类</code>。</li>
<li>然后在构造函数里定义了自己的<code>状态state</code>。</li>
<li>然后定义了很多方法，后面通过<code>props传递给子组件</code>。</li>
<li>最后定义组件自己的渲染方法<code>render</code>。</li>
</ul>
<h3 id="App状态"><a href="#App状态" class="headerlink" title="App状态"></a>App状态</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">this</span>.state = &#123; <span class="comment">//定义组件状态</span></div><div class="line">    todos: <span class="keyword">this</span>.db.get(<span class="string">'todos'</span>) || [],</div><div class="line">    isAllChecked: <span class="literal">false</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>在App组件的构造函数里，我们初始化了组件的state，分别有两个，一个是todos的列表，一个是所有的todos是否全选的状态。在渲染的时候，我们会把状态传递到子组件中，如果子组件的某一个方法让状态发生了改变，那么整个组件就会进行重绘。</p>
<h3 id="App的方法"><a href="#App的方法" class="headerlink" title="App的方法"></a>App的方法</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// 判断是否所有任务的状态都完成，同步底部的全选框</span></div><div class="line">allChecked() &#123;&#125;</div><div class="line"><span class="comment">// 添加任务，是传递给Header组件的方法</span></div><div class="line">addTodo(todoItem) &#123;&#125;</div><div class="line"><span class="comment">// 删除当前的任务，传递给TodoItem的方法</span></div><div class="line">deleteTodo(index) &#123;&#125;</div><div class="line"><span class="comment">// 清除已完成的任务，传递给Footer组件的方法</span></div><div class="line">clearDone() &#123;&#125;</div><div class="line"><span class="comment">// 改变任务状态，传递给TodoItem和Footer组件的方法</span></div><div class="line">changeTodoState(index, isDone, isChangeAll=<span class="literal">false</span>) &#123;&#125;</div><div class="line"><span class="comment">//组件渲染方法</span></div><div class="line">render() &#123;</div><div class="line">    <span class="keyword">let</span> info = &#123;</div><div class="line">        isAllChecked: <span class="keyword">this</span>.state.isAllChecked,</div><div class="line">        todoCount: <span class="keyword">this</span>.state.todos.length || <span class="number">0</span>,</div><div class="line">        todoDoneCount: (<span class="keyword">this</span>.state.todos &amp;&amp; <span class="keyword">this</span>.state.todos.filter((todo) =&gt; todo.isDone)).length || <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">        &lt;div className="todo-wrap"&gt;</div><div class="line">            &lt;TodoHeader addTodo=&#123;this.addTodo.bind(this)&#125; /&gt;</div><div class="line">            &lt;TodoMain todos=&#123;this.state.todos&#125; deleteTodo=&#123;this.deleteTodo.bind(this)&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; /&gt;</div><div class="line">            &lt;TodoFooter &#123;...info&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; clearDone=&#123;this.clearDone.bind(this)&#125; /&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>从上面的渲染（render）方法可以看出，组件的结构分为三部分，就是上中下。上面的<code>TodoHeader</code>是用来输入任务的地方，中间的<code>TodoMain</code>是用来展示任务列表的, 下面的<code>TodoFooter</code>提供一些特殊的方法，比如全选、删除等。</p>
<p>另外，上面省去function创建函数的方法，是es6的一种语法，关于es6，我之前总结过一篇文章<a href="http://luckykun.com/work/2016-05-10/es6-feature.html" target="_blank" rel="external">点这里去看es6</a>。</p>
<p>App组件定义的方法，会在渲染的时候传递给子组件，比如TodoHeader组件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&lt;TodoHeader addTodo=&#123;<span class="keyword">this</span>.addTodo.bind(<span class="keyword">this</span>)&#125; /&gt;</div></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>通过props传递子组件需要的值和方法。</li>
<li>传递方法时一定要bind(this)，不然内部this会指向不正确。</li>
<li>子组件的标签使用的时候一定要使用<code>/</code>闭合起来。</li>
<li><p>ES6语法，spread操作符让代码简洁很多，如上述代码中的TodoFooter:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&lt;TodoFooter &#123;...info&#125; /&gt;</div><div class="line"><span class="comment">//如果不使用spread操作符，就要这样写：</span></div><div class="line">&lt;TodoFooter isAllchecked=&#123;info.isAllChecked&#125; todoCount=&#123;info.todoCount&#125;     todoDoneCount=&#123;info.todoDoneCount&#125;&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="渲染App"><a href="#渲染App" class="headerlink" title="渲染App"></a>渲染App</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">React.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>));</div></pre></td></tr></table></figure>
<p>把上面的App组件的内容渲染到id为’app’的dom元素里。</p>
<p>然后我们再简单看一下分解出来的三个组件：<code>TodoHeader</code>, <code>TodoMain</code>, <code>TodoFooter</code>。</p>
<h2 id="TodoHeader组件"><a href="#TodoHeader组件" class="headerlink" title="TodoHeader组件"></a>TodoHeader组件</h2><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoHeader</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">// 绑定键盘回车事件，添加新任务</span></div><div class="line">    handlerKeyUp(e) &#123;</div><div class="line">        <span class="keyword">if</span>(e.keyCode == <span class="number">13</span>) &#123;</div><div class="line">            <span class="keyword">let</span> value = e.target.value;</div><div class="line">            <span class="keyword">if</span>(!value) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            <span class="keyword">let</span> newTodoItem = &#123;</div><div class="line">                text: value,</div><div class="line">                isDone: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line">            e.target.value = <span class="string">''</span>;</div><div class="line">            <span class="keyword">this</span>.props.addTodo(newTodoItem);   <span class="comment">//使用props调用App组件传过来的方法。</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-header"</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyUp</span>=<span class="string">&#123;this.handlerKeyUp.bind(this)&#125;</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入你的任务名称，按回车键确认"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">export default TodoHeader;   //ES6语法，导出模块，上文提到的es6文章中有讲解</div></pre></td></tr></table></figure>
<p>TodoHeader组件的创建方法和App组件的创建方法一样，内部方法就少了很多了，这里就定义了一个监听键盘的方法，绑定到了输入框的keyUp事件上，敲击回车键的时候就会调用父组件传过来的<code>addTodo()方法</code>。</p>
<h2 id="TodoMain组件"><a href="#TodoMain组件" class="headerlink" title="TodoMain组件"></a>TodoMain组件</h2><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoMain</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.props.todos.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-empty"</span>&gt;</span>恭喜您，目前没有待办任务！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">            )</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">"todo-main"</span>&gt;</span></span></div><div class="line">                    &#123;</div><div class="line">                        this.props.todos.map((todo, index) =&gt; &#123;</div><div class="line">                            //&#123;...this.props&#125; 用来传递TodoMain的todos属性和delete、change方法。</div><div class="line">                            return <span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">text</span>=<span class="string">&#123;todo.text&#125;</span> <span class="attr">isDone</span>=<span class="string">&#123;todo.isDone&#125;</span> <span class="attr">index</span>=<span class="string">&#123;index&#125;</span> &#123;<span class="attr">...this.props</span>&#125;/&gt;</span></div><div class="line">                        &#125;)</div><div class="line">                    &#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">            )</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TodoMain组件主要是为了把传递过来的todos列表遍历显示出来，而每一个list又是一个TodoItem组件。这里又用到了spread操作符<code>{...this.props}</code>，代码中也做了注释，可以洗洗品味一下。</p>
<h2 id="TodoItem组件"><a href="#TodoItem组件" class="headerlink" title="TodoItem组件"></a>TodoItem组件</h2><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">//改变任务是否已完成的状态</span></div><div class="line">    handlerChange() &#123;</div><div class="line">        <span class="keyword">let</span> isDone = !<span class="keyword">this</span>.props.isDone;</div><div class="line">        <span class="keyword">this</span>.props.changeTodoState(<span class="keyword">this</span>.props.index, isDone);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 鼠标移入事件</span></div><div class="line">    handlerMouseOver() &#123;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>).style.background = <span class="string">'#eee'</span>;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>.refs.delButton).style.display = <span class="string">'inline-block'</span>;</div><div class="line">    &#125;</div><div class="line">    handlerMouseOut() &#123;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>).style.background = <span class="string">'#fff'</span>;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>.refs.delButton).style.display = <span class="string">'none'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 删除当前任务</span></div><div class="line">    handlerDelete()&#123;</div><div class="line">        <span class="keyword">this</span>.props.deleteTodo(<span class="keyword">this</span>.props.index);</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> className = <span class="keyword">this</span>.props.isDone ? <span class="string">'task-done'</span> : <span class="string">''</span>;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onMouseOver</span>=<span class="string">&#123;this.handlerMouseOver.bind(this)&#125;</span> <span class="attr">onMouseOut</span>=<span class="string">&#123;this.handlerMouseOut.bind(this)&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">&#123;this.props.isDone&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handlerChange.bind(this)&#125;</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;this.props.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">"delButton"</span> <span class="attr">className</span>=<span class="string">"btn btn-danger"</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handlerDelete.bind(this)&#125;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TodoItem有这四个方法，我们主要看看新出现的几点：</p>
<ul>
<li><code>React.findDOMNode(this)</code>可以获取当前这个组件标签。</li>
<li>在元素中定义<code>ref=xxx</code>属性，就可以通过<code>React.findDOMNode(this.refs.xxx)</code>获取到这个元素。</li>
<li>给元素定义class类名的时候要使用<code>className</code>。</li>
</ul>
<h2 id="TodoFooter组件"><a href="#TodoFooter组件" class="headerlink" title="TodoFooter组件"></a>TodoFooter组件</h2><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoFooter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">//改变任务是否已完成的状态</span></div><div class="line">    handlerSelectAll(e) &#123;</div><div class="line">        <span class="keyword">this</span>.props.changeTodoState(<span class="literal">null</span>, e.target.checked, <span class="literal">true</span>);    <span class="comment">// true表示全部操作。</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">//删除全部已完成的任务</span></div><div class="line">    handlerDeleteDone() &#123;</div><div class="line">        <span class="keyword">this</span>.props.clearDone();</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-footer"</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">&#123;this.props.isAllChecked&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handlerSelectAll.bind(this)&#125;</span> /&gt;</span>全选</div><div class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"text-success"</span>&gt;</span>已完成&#123;this.props.todoDoneCount&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> / 全部&#123;this.props.todoCount&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">"btn btn-danger"</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handlerDeleteDone.bind(this)&#125;</span>&gt;</span>清除已完成任务<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>todoFooter组件主要用来批量更改状态和清除已完成的任务，还要显示任务完成情况，所以代码很简单了。</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p><code>webpack 命令行的几种基本命令:</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">$ webpack <span class="comment">// 最基本的启动webpack方法</span></div><div class="line">$ webpack -w <span class="comment">// 提供watch方法，实时进行打包更新</span></div><div class="line">$ webpack -p <span class="comment">// 对打包后的文件进行压缩，提供production</span></div><div class="line">$ webpack -p -w <span class="comment">// 对打包后的文件进行压缩，并且实时监听</span></div><div class="line">$ webpack -d <span class="comment">// 提供source map，方便调试。</span></div></pre></td></tr></table></figure>
<p>回过头来再看看这个demo的实现过程，react组件化的思想让我们编写代码的时候思维清晰，便于阅读。我们通过父组件来控制状态，并通过props传递，来保证组件内的状态一致，并且我们可以清晰的看到某一个方法该由谁来维护。这是一种全新的前端编码体验，相信以后会成为主流。</p>
<p>另外，我们看到代码中，html直接嵌到js中了，这就是React提出的一种叫JSX的语法。其实入门react本身还是很简单，只是很多人看到JSX和ES6的语法，就打了退堂鼓了，因为我们被代码分离”洗脑”太久了。其实，它们就好像是一堵墙，要是我们畏惧这个障碍止步不前，那么只能停留在原地，如果我们骨气勇气爬上去，才发现react的风景真的很优美！</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li><a href="http://www.reqianduan.com/2297.html" target="_blank" rel="external">http://www.reqianduan.com/2297.html</a></li>
<li><a href="http://wiki.jikexueyuan.com/project/react-tutorial/" target="_blank" rel="external">http://wiki.jikexueyuan.com/project/react-tutorial/</a></li>
<li><a href="http://gank.io/post/564151c1f1df1210001c9161" target="_blank" rel="external">http://gank.io/post/564151c1f1df1210001c9161</a></li>
</ul>

      
    </div>
    
  </div>
  
    
<div class="support-author">
    <p>如果您觉得我的文章对您有用，请随意打赏。</p>
    <p>您的支持将鼓励我继续创作！</p>
    <a href="javascript:;" class="show-code">¥ 打赏支持</a>
    <p class="pay-code">
        <img class src="http://7xtawy.com2.z0.glb.clouddn.com/qrcode.png">
    </p>
</div>


<nav id="article-nav">
  
    <a href="/work/2016-05-29/tiny-heart-study.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          上一篇：h5+canvas实现酷炫的小游戏
        
      </div>
    </a>
  
  
    <a href="/work/2016-05-20/hexo-advance.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">下一篇：hexo博客进阶－相册和独立域名</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<!-- Share to: &nbsp;  -->
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_facebook"></a>
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a>
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="react-todo-study" data-title="React入门最好的实例－TodoList" data-url="http://yoursite.com/work/2016-05-23/react-todo-study.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"jarson7426"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>







<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
            <span id="busuanzi_container_site_uv" style="color:#333;font-size:13px;">
                本站到目前为止已有<span id="busuanzi_value_site_uv" style="color:#ef7522">0</span>人留下脚印
            </span>
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
             --- &copy; 2016 luckykun
      	</div>
    </div>
  </div>
</footer>

    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/require,jquery.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  </div>
  <div class="go-top"></div>
  <script src="/js/busuanzi.min.js"></script>
</body>
</html>
